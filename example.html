<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>JS2CS Converter</title>
    <!-- js2cs itself -->
    <script src="parser.browser.js" type="text/javascript"></script>
    <script src="app.js" type="text/javascript"></script>
    <!-- codemirror -->
    <script src="codemirror/js/codemirror.js" type="text/javascript"></script>  
     <script type="text/javascript">
     var convert = function(val) {
      output = '';
      var _error;
      document.getElementById("error").value = '';
      try{
        var ast = parseJs(val);
      } catch(e) {
        _error = e.name + " on line " + e.line + " on column " + e.column + ": " + e.message;
        document.getElementById("error").value = _error;
      } finally {
        parseNode(ast);
        var cs = document.getElementById("cs");
        cs.value = removeBlankLines(output);
      }
     }
     
     window.onload = function() {
        /*
        var editor = CodeMirror.fromTextArea('js', {
          parserfile: ["tokenizejavascript.js", "parsejavascript.js"],
          stylesheet: "codemirror/css/jscolors.css",
          path: "codemirror/js/",
          width: "960px",
          height: "480px",
          onChange: function(){}
        });
       */
       convert(document.getElementById("js").value);
     }
 
    </script>
  </head>
  
  <body>
    <div>
      <h1>JavaScript to CoffeeScript Compiler</h1>
      <p>Feeds the compiler at <a href="http://coffeescript.com">coffeescript.com</a></p>
      <p>Intended as a learning aid about JavaScript, CoffeeScript, parsing, Abstract Syntax Trees, recursivity, 1:1ness and the utility of anyone trying to convert their scripts</p>

      <p>Syntax error:<input type="text" id="error" value="" size="100" /></p>

      <p>Input JavaScript</p>
      <textarea rows="50" cols="50" id="js" onKeyUp="convert(this.value)"></textarea>
<hr />
      <p>Resultant CoffeeScript</p>
      <textarea rows="50" cols="50" id="cs"></textarea>
      
    </div>
  </body>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17736815-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</html>
